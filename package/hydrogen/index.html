<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Atom Packages Directory</title>
    <link rel="stylesheet" href="/assets/application.css">
    <link rel="stylesheet" href="/assets/admin.css">
    <link rel="icon" href="/assets/favicon.png">

  </head>
  <body>
    <header>
      <h1><a href="/"><span class="octicon octicon-package"></span>Atom Packages Directory</a></h1>
      <span class="subheader">a package directory for a <a href="http://atom.io">text editor of the 21st Century</a></span>
    </header>
    <section id="content">
      <h1>
  Hydrogen
  <a href="https://github.com/nteract/hydrogen">
    <span class="octicon octicon-mark-github"></span>
  </a>
  
    <span class="author">by Will Whitney <me@willwhitney.com></span>
  
</h1>
<div class="package-install">
  <strong>Install with:</strong>
  <pre>
    apm install hydrogen
  </pre>
</div>
<h1 id="hydrogen">Hydrogen</h1>

<p><a href="http://slack.nteract.in"><img src="http://slack.nteract.in/badge.svg" alt="slack in" /></a>
<a href="https://travis-ci.org/nteract/hydrogen"><img src="https://travis-ci.org/nteract/hydrogen.svg?branch=master" alt="Build Status" /></a></p>

<p>This package lets you run your code directly in Atom using any <a href="https://jupyter.org/">Jupyter</a> kernels you have installed.</p>

<p>Hydrogen was inspired by Bret Victor’s ideas about the power of instantaneous feedback and the design of <a href="http://lighttable.com/">Light Table</a>. Running code inline and in real time is a more natural way to develop. By bringing the interactive style of Light Table to the rock-solid usability of Atom, Hydrogen makes it easy to write code the way you want to.</p>

<p>&lt;img src=”https://cloud.githubusercontent.com/assets/13285808/14598778/1cff1b32-0554-11e6-8181-504307ca6b56.gif” width=600&gt;</p>

<h2 id="features">Features</h2>

<ul>
  <li>execute a line, selection, or block at a time</li>
  <li>rich media support for plots, images, and video</li>
  <li>watch expressions let you keep track of variables and re-run snippets after every change</li>
  <li>completions from the running kernel, just like autocomplete in the Chrome dev tools</li>
  <li>code can be inspected to show useful information provided by the running kernel</li>
  <li>one kernel per language (so you can run snippets from several files, all in the same namespace)</li>
  <li>interrupt or restart the kernel if anything goes wrong</li>
  <li>use a custom kernel connection (for example to run code inside Docker), read more in the “Custom kernel connection (inside Docker)” section</li>
</ul>

<!-- <img src="http://i.imgur.com/KiHQFO4.png?1" width=300> -->

<h2 id="dependencies">Dependencies</h2>

<p>For all systems, you’ll need</p>

<ul>
  <li><a href="https://atom.io/">Atom</a> <code>1.6.0+</code></li>
  <li><a href="http://zeromq.org/intro:get-the-software">ZeroMQ</a></li>
  <li>IPython notebook <code>pip install ipython[notebook]</code></li>
  <li>Python 2 (for builds - you can still run Python 3 code)</li>
</ul>

<p>Each operating system has their own instruction set. Please read on down to save yourself time.</p>

<h4 id="os-x">OS X</h4>

<h5 id="homebrew-on-os-x">homebrew on OS X</h5>

<ul>
  <li><a href="https://www.freedesktop.org/wiki/Software/pkg-config/"><code>pkg-config</code></a>: <code>brew install pkg-config</code></li>
  <li><a href="http://zeromq.org/intro:get-the-software">ZeroMQ</a>: <code>brew install zeromq</code></li>
  <li><a href="http://ipython.org/install.html">IPython (Jupyter)</a>: needs to be installed and on your <code>$PATH</code>. <code>pip install "ipython[notebook]"</code></li>
</ul>

<h4 id="windows">Windows</h4>

<ul>
  <li>You’ll need a compiler! <a href="https://www.visualstudio.com/en-us/downloads/download-visual-studio-vs.aspx">Visual Studio 2013 Community Edition</a> is required to build zmq.node.</li>
  <li>Python (tread on your own or install <a href="https://www.continuum.io/downloads">Anaconda</a>)</li>
  <li><a href="http://ipython.org/install.html">IPython notebook</a> - If you installed Anaconda, you’re already done</li>
</ul>

<p>After these are installed, you’ll likely need to restart your machine (especially after Visual Studio).</p>

<h4 id="linux">Linux</h4>

<p>For Debian/Ubuntu based variants, you’ll need <code>libzmq3-dev</code> (preferred) or alternatively <code>libzmq-dev</code>. <br />
For RedHat/CentOS/Fedora based variants, you’ll need <code>zeromq</code> and <code>zeromq-devel</code>.</p>

<p>If you have Python and pip setup, install the notebook directly:</p>

<p><code>
pip install ipython[notebook]
</code></p>

<h2 id="installation">Installation</h2>

<p>Assuming you followed the dependencies steps above, you can now <code>apm install hydrogen</code> (recommended) or search for “hydrogen” in the Install pane of the Atom settings. Note that installing from within Atom will only work if you start Atom from the command line! See <a href="#Jank">Jank</a>.</p>

<p>If your default <code>python</code> is 3.x, you need to instead run <code>PYTHON=python2.7 apm install hydrogen</code>. You can still use 3.x versions of Python in Hydrogen, but it will only build with 2.x due to a <a href="https://bugs.chromium.org/p/gyp/issues/detail?id=36">longstanding issue with <code>gyp</code></a></p>

<h3 id="troubleshooting">Troubleshooting</h3>

<p>We have a <a href="https://github.com/nteract/hydrogen/wiki/Troubleshooting">troubleshooting guide</a> in the wiki! It’s pretty sparse at the moment, so please share how the resolution to any rough spots that you find.</p>

<h3 id="kernels">Kernels</h3>

<p>Tested and works with:</p>

<ul>
  <li><a href="http://ipython.org/">IPython</a></li>
  <li><a href="https://github.com/JuliaLang/IJulia.jl">IJulia</a></li>
  <li><a href="https://github.com/facebook/iTorch">iTorch</a></li>
  <li><a href="https://github.com/n-riesco/ijavascript">IJavascript</a></li>
  <li><a href="https://github.com/notablemind/jupyter-nodejs">jupyter-nodejs</a></li>
  <li><a href="https://github.com/IRkernel/IRkernel">IRkernel</a> (install the “Development” version from <code>master</code> — necessary changes haven’t gotten released as binaries yet)</li>
</ul>

<p>But it <em>should</em> work with any <a href="https://github.com/ipython/ipython/wiki/IPython-kernels-for-other-languages">kernel</a> — <a href="https://github.com/nteract/hydrogen/issues">post an issue</a> if anything is broken!</p>

<p>&lt;img src=”http://i.imgur.com/1cGSHzo.png” width=350&gt;
&lt;img src=”http://i.imgur.com/I5kO69B.png” width=350&gt;</p>

<p>Note that if you install a new kernel, you’ll need to reload Atom (search in the Command Palette for “reload”) for Hydrogen to find it. For performance reasons, Hydrogen only looks for available kernels when it first starts.</p>

<h2 id="usage">Usage</h2>

<p>Make sure to start Atom from the command line (with <code>atom &lt;directory or file&gt;</code>) for this package to work! See <a href="#Jank">Jank</a>.</p>

<h3 id="running-code">Running code</h3>

<p>Hydrogen adds a command “Hydrogen: Run” to the command palette when you’re in any text editor. Press ⌘-⇧-P to open the command palette and type “hydrogen” — it’ll come up.</p>

<p>The “Hydrogen: Run” command is bound to the keyboard shortcut ⌘-⌥-↩ by default.</p>

<p>There are two ways to tell Hydrogen which code in your file to run.</p>

<ol>
  <li><strong>Selected code:</strong> If you have code selected when you hit Run, Hydrogen will run exactly that code.</li>
  <li>
    <p><strong>Current block:</strong> With no code selected, Hydrogen will try to find the complete block that’s on or before the current line.</p>

    <ul>
      <li>
        <p>If the line you’re on is already a complete expression (like <code>s = "abracadabra"</code>), Hydrogen will run just that line.</p>
      </li>
      <li>
        <p>If the line you’re on is the start of a block like a <code>for</code> loop, Hydrogen will run the whole block.</p>
      </li>
      <li>
        <p>If the line you’re on is blank, Hydrogen will run the first block above that line.</p>
      </li>
    </ul>
  </li>
</ol>

<p>It’s easiest to see these interactions visually:</p>

<p><img src="http://g.recordit.co/4ViVmKtKAr.gif" /></p>

<p>If your code starts getting cluttered up with results, run “Hydrogen: Clear Results” to remove them all at once. You can also run this command with ⌘-⌥-⌫.</p>

<h3 id="watch-expressions">Watch Expressions</h3>

<p>After you’ve run some code with Hydrogen, you can use the “Hydrogen: Toggle Watches” command from the Command Palette to open the watch expression sidebar. Whatever code you write in watch expressions will be re-run after each time you send that kernel any other code.</p>

<p>&lt;img width=770 src=”https://cloud.githubusercontent.com/assets/13285808/14125700/e5cb587a-f60c-11e5-9c28-5aef83088da2.gif”&gt;</p>

<p><strong>IMPORTANT:</strong> Be careful what you put in your watch expressions. If you write code that mutates state in a watch expression, that code will get run after every execute command and likely result in some <em>extremely confusing</em> bugs.</p>

<p>You can re-run the watch expressions by using the normal run shortcut (⌘-⌥-↩ by default) inside a watch expression’s edit field.</p>

<p>If you have multiple kernels running, you can switch between their watch expressions with the “Hydrogen: Select Watch Kernel” command (or just click on the “Kernel: <language>" text).</language></p>

<h3 id="completion">Completion</h3>

<p>Receive completions from the running kernel.</p>

<p><img width="416" src="https://cloud.githubusercontent.com/assets/13285808/14108987/35d17fae-f5c0-11e5-9c0b-ee899387f4d9.png" /></p>

<h3 id="code-introspection">Code Introspection</h3>

<p>You can use the “Hydrogen: Inspect” command from the Command Palette to get metadata from the kernel about the object under the cursor.</p>

<p><img width="770" src="https://cloud.githubusercontent.com/assets/13285808/14108719/d72762bc-f5be-11e5-8188-32725e3d2726.png" /></p>

<h3 id="managing-kernels">Managing kernels</h3>

<p>Sometimes things go wrong. Maybe you’ve written an infinite loop, maybe the kernel has crashed, or maybe you just want to clear the kernel’s namespace. Use the command palette to open “Hydrogen: Show Kernel Commands” and select “Interrupt” to interrupt (think <code>Ctrl-C</code> in a REPL) the kernel or “Restart” to kill the kernel and start a new one, clearing the namespace.</p>

<p>You can also access these commands by clicking on the kernel status in the status bar. It looks like this:</p>

<p>&lt;img src=”http://i.imgur.com/oQB5mpB.png” width=300&gt;</p>

<p>Additionally, if you have two or more kernels for a particular language (grammar), you can select which kernel to use with the “Switch to <kernel>" option in the Kernel Commands menu. This change is automatically saved into the Hydrogen configuration's ```grammarToKernel``` map. For example, if Hydrogen is using the kernel for Python 2 by default, you could switch to Python 3. Then next time you open a `.py` file, Hydrogen will remember your selection and use Python 3.</kernel></p>

<h2 id="how-it-works">How it works</h2>

<p>Hydrogen implements the <a href="http://ipython.org/ipython-doc/stable/development/messaging.html">messaging protocol</a> for <a href="https://jupyter.org/">Jupyter</a>. Jupyter (formerly IPython) uses ZeroMQ to connect a client (like Hydrogen) to a running kernel (like IJulia or iTorch). The client sends code to be executed to the kernel, which runs it and sends back results.</p>

<h2 id="jank">Jank</h2>

<ul>
  <li>In order to have access to your <code>$PATH</code> to find where IPython and other binaries are, Atom has to be launched from the command line with <code>atom &lt;location&gt;</code>. If you launch Atom as an app, this package won’t work.</li>
</ul>

<h2 id="custom-kernel-connection-inside-docker">Custom kernel connection (inside Docker)</h2>

<p>You can use a custom kernel connection file to connect to a previously created kernel.</p>

<p>For example, you can run a kernel inside a Docker container and make Hydrogen connect to it automatically. If you are using Docker this would allow you to develop from Atom but with all the dependencies, autocompletion, environment, etc of a Docker container.</p>

<p>Hydrogen will look for a kernel JSON connection file under <code>./hydrogen/connection.json</code> inside your project. If that file exists, Hydrogen will try to connect to the kernel specified by that connection file.</p>

<p>Here’s a simple recipe for doing and testing that with Python:</p>

<ul>
  <li>In your project directory, create a <code>Dockerfile</code> with:</li>
</ul>

<p>```
FROM python:2.7</p>

<p>RUN pip install markdown</p>

<p>RUN pip install ipykernel
RUN echo “alias hydrokernel=’python -m ipykernel “’–ip=$(hostname -I)’” -f /tmp/hydrogen/connection.json’” » /etc/bash.bashrc
```</p>

<p>You will test using the Python package <code>markdown</code> from inside the Docker container in your local Atom editor, with autocompletion, etc.</p>

<p>The last two lines are the only (temporal) addition to your <code>Dockerfile</code> that will allow you to develop locally using the remote Python kernel. If you already have a Python project with a <code>Dockerfile</code> you only need to copy those 2 lines and add them to it:</p>

<p><code>
RUN pip install ipykernel
RUN echo "alias hydrokernel='python -m ipykernel "'--ip=$(hostname -I)'" -f /tmp/hydrogen/connection.json'" &gt;&gt; /etc/bash.bashrc
</code></p>

<p>The first of those two lines will install the Python package <code>ipykernel</code>, which is the only requisite to run the remote Python kernel.</p>

<p>The second line creates a handy shortcut named <code>hydrokernel</code> to run a Python kernel that listens on the container’s IP address and writes the connection file to <code>/tmp/hydrogen/connection.json</code>.</p>

<ul>
  <li>Build your container with:</li>
</ul>

<p><code>
docker build -t python-docker .
</code></p>

<ul>
  <li>Run your container mounting a volume that maps <code>./hydrogen/</code> in your local project directory to <code>/tmp/hydrogen/</code> in your container. That’s the trick that will allow Hydrogen to connect to the kernel running inside your container automatically. It’s probably better to run it with the command <code>bash</code> and start the kernel manually, so that you can restart it if you need to (or if it dies).</li>
</ul>

<p><code>
docker run -it --name python-docker -v $(pwd)/hydrogen:/tmp/hydrogen python-docker bash
</code></p>

<ul>
  <li>Next, you just have to call the alias command we created in the <code>Dockerfile</code>, that will start the kernel with all the parameters needed:</li>
</ul>

<p><code>
hydrokernel
</code></p>

<ul>
  <li>You will see an output similar to:</li>
</ul>

<p>```
root@24ae5d04ef3c:/# hydrokernel
NOTE: When using the <code>ipython kernel</code> entry point, Ctrl-C will not work.</p>

<p>To exit, you will have to explicitly quit this process, by either sending
“quit” from a client, or using Ctrl-\ in UNIX-like environments.</p>

<p>To read more about this, see https://github.com/ipython/ipython/issues/2049</p>

<p>To connect another client to this kernel, use:
    –existing /tmp/hydrogen/connection.json
```</p>

<ul>
  <li>
    <p>And you will see that a file was created in <code>./hydrogen/connection.json</code> inside your project directory.</p>
  </li>
  <li>
    <p>Now you can create a file <code>test.py</code> with:</p>
  </li>
</ul>

<p><code>
import markdown
markdown.version
</code></p>

<ul>
  <li>
    <p>Select the contents and run them with Hydrogen (“<code>cmd-shift-P</code>” and “<code>Hydrogen: run</code>”).</p>
  </li>
  <li>
    <p>You will see the inline execution and output that just ran from your kernel, even if you don’t have the Python package <code>mardown</code> installed locally, because it’s running inside your container.</p>
  </li>
</ul>

<p><code>
import markdown [✓]
markdown.version ['2.6.6']
</code></p>

<h2 id="why-hydrogen">Why “Hydrogen”?</h2>

<p>Hydrogen atoms make up 90% of Jupiter by volume.</p>

<p>Plus, it was easy to make a logo.</p>

<p><img src="https://cdn.rawgit.com/nteract/hydrogen/master/static/logo.svg" alt="hydrogen logo" /></p>

<h2 id="development">Development</h2>
<p>#### Quick and dirty setup</p>

<p><code>apm develop hydrogen</code></p>

<p>This will clone the <code>hydrogen</code> repository to <code>~/github</code> unless you set the
<code>ATOM_REPOS_HOME</code> environment variable.</p>

<h4 id="i-already-cloned-it">I already cloned it!</h4>

<p>If you cloned it somewhere else, you’ll want to use <code>apm link --dev</code> within the
package directory, followed by <code>apm install</code> to get dependencies.</p>

<h3 id="workflow">Workflow</h3>

<p>After pulling upstream changes, make sure to run <code>apm update</code>.</p>

<p>To start hacking, make sure to run <code>atom --dev</code> from the package directory.
Cut a branch while you’re working then either submit a Pull Request when done
or when you want some feedback!</p>

<h4 id="running-specs">Running specs</h4>

<p>You can run specs by triggering the <code>window:run-package-specs</code> command in Atom. To run tests on the command line use <code>apm test</code> within the package directory.</p>

<p>You can learn more about how to write specs <a href="http://flight-manual.atom.io/hacking-atom/sections/writing-specs/">here</a>.</p>
<section class="package-keywords">
  <strong>Keywords:</strong> execute, run, jupyter, ipython, julia, python, torch, ijulia, itorch, plot, image <a href="https://github.com/nteract/hydrogen/edit/master/package.json">Suggest keywords</a>
</section>

    </section>
    <footer>
      <p>
        <span class="octicon octicon-code"></span> with <span class="octicon octicon-heart"></span> by <a href="http://bastilian.me">@bastilian</a><br />
        <small>
          1872 out of 5687 packages categorised.
          | Last updated: 2016-07-15</small>
      </p>
      <p>

      </p>
    </footer>
    <div style="opacity:.15;position:relative;z-index:-1;">
      <div class="system"></div>
      <div class="system-2"></div>
    </div>
    <a href="https://github.com/bastilian/atom-packages.directory">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
    </a>
  </body>
</html>
